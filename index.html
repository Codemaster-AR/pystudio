
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyStudio Pro - Hyper-Terminal IDE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.26.4/full/pyodide.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <style>
        :root { --term-bg: #050505; --term-glow: rgba(96, 165, 250, 0.15); }
        body { font-family: 'Inter', sans-serif; background-color: #020617; }
        .fira-code { font-family: 'Fira Code', monospace; }
        
        /* Advanced Editor Layout */
        #editor-container { position: relative; }
        #editor-textarea {
            background: transparent; color: transparent; caret-color: #60a5fa;
            z-index: 10; resize: none; line-height: 1.5rem; font-size: 14px;
        }
        #editor-highlight {
            position: absolute; top: 0; left: 0; pointer-events: none;
            white-space: pre-wrap; word-wrap: break-word; line-height: 1.5rem; font-size: 14px;
        }
        pre[class*="language-"] { margin: 0; padding: 1rem; background: transparent !important; }

        /* Hyper-Terminal Styles */
        #terminal-output {
            background-color: var(--term-bg);
            color: #d1d5db;
            text-shadow: 0 0 2px rgba(255,255,255,0.05);
        }
        .terminal-scroll::-webkit-scrollbar { width: 4px; }
        .terminal-scroll::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
        
        .ansi-bold { font-weight: 700; }
        .ansi-italic { font-style: italic; }
        .ansi-underline { text-decoration: underline; }
        
        /* Rich Output Styles */
        .rich-output table { border-collapse: collapse; width: 100%; margin: 10px 0; font-size: 12px; }
        .rich-output th, .rich-output td { border: 1px solid #334155; padding: 8px; text-align: left; }
        .rich-output th { background: #111827; color: #60a5fa; text-transform: uppercase; font-size: 10px; }
        .rich-output img { max-width: 100%; height: auto; border-radius: 8px; border: 1px solid #334155; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.5); }
        
        /* Interactive Widgets */
        .py-widget-btn {
            background: #2563eb; color: white; padding: 4px 12px; border-radius: 4px;
            font-size: 11px; font-weight: bold; transition: all 0.2s;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .py-widget-btn:hover { background: #3b82f6; transform: translateY(-1px); box-shadow: 0 4px 6px -1px rgba(0,0,0,0.2); }
        .py-widget-btn:active { transform: translateY(0); }

        /* ASCII Art Optimized Container */
        .ascii-art {
            line-height: 1.1;
            letter-spacing: 0;
            white-space: pre;
            display: inline-block;
        }
    </style>
    <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://esm.sh/@google/genai@^1.35.0"
      }
    }
    </script>
</head>
<body class="text-slate-200 h-screen flex flex-col overflow-hidden">

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 z-[100] bg-slate-950 flex flex-col items-center justify-center transition-opacity duration-500">
        <div class="relative scale-110">
            <div class="w-24 h-24 border-4 border-blue-500/10 border-t-blue-500 rounded-full animate-spin"></div>
            <div class="absolute inset-0 flex items-center justify-center text-blue-500 font-black text-xl tracking-tighter">PY</div>
        </div>
        <h2 class="mt-8 text-2xl font-black text-white tracking-tight">PyStudio <span class="text-blue-500 underline decoration-blue-500/30">PRO</span></h2>
        <p id="loading-status" class="mt-3 text-slate-500 text-xs font-medium uppercase tracking-[0.2em] fira-code">Syncing WASM Kernel...</p>
    </div>

    <!-- Header -->
    <header class="h-14 border-b border-slate-800 flex items-center justify-between px-6 bg-slate-950 z-20">
        <div class="flex items-center space-x-4">
            <div class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-lg flex items-center justify-center shadow-lg shadow-blue-900/40">
                    <span class="text-white font-black text-sm">P</span>
                </div>
                <h1 class="text-base font-bold tracking-tight text-slate-100">HyperStudio</h1>
            </div>
            <nav class="flex items-center space-x-1 pl-4 border-l border-slate-800">
                <button class="px-3 py-1 text-xs font-semibold text-slate-400 hover:text-white rounded-md transition-colors">File</button>
                <button class="px-3 py-1 text-xs font-semibold text-slate-400 hover:text-white rounded-md transition-colors">Edit</button>
                <button class="px-3 py-1 text-xs font-semibold text-slate-400 hover:text-white rounded-md transition-colors">Packages</button>
            </nav>
        </div>
        <div class="flex items-center space-x-3">
            <div class="hidden md:flex items-center space-x-2 px-3 py-1 bg-slate-900/50 border border-slate-800 rounded-full mr-2">
                <div class="w-2 h-2 rounded-full bg-blue-500 animate-pulse"></div>
                <span class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">WASM 3.12 Loaded</span>
            </div>
            <button id="clear-btn" class="text-xs font-bold text-slate-500 hover:text-white px-3 transition-colors">Clear</button>
            <button id="run-btn" class="bg-blue-600 hover:bg-blue-500 text-white px-5 py-2 rounded-lg text-xs font-black flex items-center space-x-2 transition-all active:scale-95 shadow-xl shadow-blue-900/20">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                </svg>
                <span>EXECUTE</span>
            </button>
        </div>
    </header>

    <div class="flex-1 flex overflow-hidden">
        <!-- Main Workspace -->
        <main class="flex-1 flex overflow-hidden">
            <!-- Left: Editor -->
            <div class="flex-1 flex flex-col border-r border-slate-800 bg-[#020617]">
                <div class="h-8 flex items-center px-4 bg-slate-950 border-b border-slate-900 justify-between">
                    <span class="text-[10px] font-bold text-slate-500 uppercase tracking-widest flex items-center">
                        <svg class="w-3 h-3 mr-2 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                        Main.py
                    </span>
                </div>
                <div id="editor-container" class="flex-1 overflow-auto relative">
                    <pre id="editor-highlight" class="language-python"><code></code></pre>
                    <textarea id="editor-textarea" class="absolute top-0 left-0 w-full h-full p-4 outline-none fira-code font-medium" spellcheck="false"># ðŸŒˆ Hyper-Terminal Demo: TrueColor + ASCII + Buttons
import sys
import time
import pandas as pd

print("--- Initializing Hyper-Terminal Rendering ---")

# 1. TrueColor Rainbow Effect (Standard ANSI 24-bit)
def rainbow_text(text):
    for i, char in enumerate(text):
        r = int(127 + 127 * (i / len(text)))
        g = int(127 + 127 * (0.5 + i / len(text)))
        b = int(255 * (i / len(text)))
        print(f"\033[38;2;{r};{g};{b}m{char}", end="")
    print("\033[0m")

rainbow_text("VIBRANT TRUECOLOR RAINBOW SYSTEM ACTIVATED")

# 2. Advanced ASCII Art Handling
print("""\033[36m
      _____       _____ _             _ _        
     |  __ \     / ____| |           | (_)       
     | |__) |   | (___ | |_ _   _  __| |_  ___   
     |  ___/     \___ \| __| | | |/ _` | |/ _ \  
     | |         ____) | |_| |_| | (_| | | (_) | 
     |_|        |_____/ \__|\__,_|\__,_|_|\___/  
\033[0m""")

# 3. Interactive UI Bridge
def on_click():
    print("\033[32;1m[CALLBACK]\033[0m Button was clicked in the UI!")
    display(pd.DataFrame({"Action": ["Success"], "Status": [200]}))

print("Adding interactive widget to the stream...")
create_button("Trigger Python Callback", on_click)

# 4. Complex Data Processing
df = pd.DataFrame({
    'Metric': ['CPU', 'RAM', 'GPU', 'DISK'],
    'Usage': [42, 68, 12, 89],
    'Status': ['Optimal', 'High', 'Idle', 'Full']
})
display(df)
</textarea>
                </div>
            </div>

            <!-- Right: Double-Output Panel -->
            <div class="w-[500px] flex flex-col bg-[#050505]">
                <!-- Rich Pane -->
                <div class="flex-1 flex flex-col border-b border-slate-900 min-h-0">
                    <div class="h-9 flex items-center px-4 bg-slate-950 border-b border-slate-900">
                        <span class="text-[9px] font-black text-blue-500 uppercase tracking-[0.2em]">Rich Visualization</span>
                    </div>
                    <div id="rich-output" class="flex-1 overflow-y-auto p-5 rich-output terminal-scroll space-y-6">
                        <div class="text-slate-700 text-[10px] font-medium uppercase text-center mt-10">Awaiting rich signals...</div>
                    </div>
                </div>

                <!-- Terminal Pane -->
                <div class="h-[350px] flex flex-col bg-black overflow-hidden relative">
                    <div class="h-8 flex items-center px-4 bg-slate-950/50 border-b border-white/5 justify-between">
                        <span class="text-[9px] font-black text-slate-500 uppercase tracking-[0.2em]">Advanced Console v4.0</span>
                        <div class="flex space-x-1">
                            <div class="w-2 h-2 rounded-full bg-red-900/50"></div>
                            <div class="w-2 h-2 rounded-full bg-yellow-900/50"></div>
                            <div class="w-2 h-2 rounded-full bg-green-900/50"></div>
                        </div>
                    </div>
                    <div id="terminal-output" class="flex-1 overflow-y-auto p-4 fira-code text-[11px] space-y-1 terminal-scroll"></div>
                    
                    <div class="flex items-center px-4 py-3 bg-slate-950/80 border-t border-white/5 backdrop-blur-md">
                        <span id="prompt-label" class="text-blue-500 font-black mr-3 fira-code text-xs">>>></span>
                        <input id="terminal-input" type="text" class="flex-1 bg-transparent outline-none fira-code text-xs text-slate-200 placeholder:text-slate-700" placeholder="Type Python or pip commands...">
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Status Bar -->
    <footer class="h-7 bg-slate-950 border-t border-slate-900 flex items-center px-6 justify-between">
        <div class="flex items-center space-x-6">
            <div class="flex items-center space-x-2">
                <span class="text-[9px] font-bold text-slate-600 uppercase tracking-widest">Status:</span>
                <span id="status-text" class="text-[9px] font-bold text-blue-400 uppercase tracking-widest">Operational</span>
            </div>
            <div class="flex items-center space-x-2">
                <span class="text-[9px] font-bold text-slate-600 uppercase tracking-widest">Kernel:</span>
                <span class="text-[9px] font-bold text-white tracking-widest">3.12 (WASM)</span>
            </div>
        </div>
        <div class="flex items-center space-x-4">
            <span class="text-[9px] font-bold text-slate-700 tracking-tighter">HyperStudio Pro &copy; 2025</span>
        </div>
    </footer>

    <script type="module" src="index.js"></script>
</body>
</html>
